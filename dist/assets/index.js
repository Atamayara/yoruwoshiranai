(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const o of t.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerPolicy&&(t.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?t.credentials="include":n.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(n){if(n.ep)return;n.ep=!0;const t=r(n);fetch(n.href,t)}})();const a=document.getElementById("prefSelect"),u=document.getElementById("datetime"),m=document.getElementById("submitButton"),d=document.getElementById("postAreaContent"),g=document.getElementById("postTimeContent"),f=document.getElementById("postDate"),p=document.getElementById("postTime"),h=["空真っ暗や","空明るくなってきた","太陽出てきた","空真っ白や","空暗くなってきた","太陽ないなった"],y=["日","月","火","水","木","金","土"],c=[["北海道",141.2048,43.0351],["青森",140.4424,40.4927],["岩手",141.0909,39.4212],["宮城",140.5219,38.1608],["秋田",140.0608,39.4307],["山形",140.2148,38.1425],["福島",140.2803,37.45],["茨城",140.2648,36.203],["栃木",139.5301,36.3356],["群馬",139.0339,36.2328],["埼玉",139.3856,35.5125],["千葉",140.0723,35.3616],["東京",139.413,35.4121],["神奈川",139.3833,35.2652],["新潟",139.0123,37.5408],["富山",137.124,36.4142],["石川",136.3732,36.354],["福井",136.1318,36.0354],["山梨",138.3406,35.395],["長野",138.1051,36.3904],["岐阜",136.4319,35.2327],["静岡",138.2259,34.5836],["愛知",136.5424,35.1049],["三重",136.303,34.4349],["滋賀",135.5205,35.0015],["京都",135.452,35.0116],["大阪",135.3112,34.4111],["兵庫",135.1059,34.4128],["奈良",135.4958,34.4107],["和歌山",135.1002,34.1333],["鳥取",134.1417,35.3012],["島根",133.0301,35.282],["岡山",133.5606,34.3942],["広島",132.2734,34.2347],["山口",131.2817,34.1108],["徳島",134.3333,34.0356],["香川",134.0235,34.2024],["愛媛",132.4557,33.503],["高知",133.3151,33.3334],["福岡",130.2505,33.3623],["佐賀",130.1755,33.1457],["長崎",129.5202,32.45],["熊本",130.443,32.4722],["大分",131.3645,33.1417],["宮崎",131.2526,31.5439],["鹿児島",130.3329,31.3337],["沖縄",127.4051,26.1244]];for(let e=0;e<c.length;e++){const s=document.createElement("option");s.value=e.toString(),s.textContent=c[e][0],a.append(s)}a.value="21";m.addEventListener("click",b);T();function T(){const e=new Date,r=new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().slice(0,-1);u.value=r}function D(){const e=u.value;return new Date(e)}function l(e){return`0${e}`.slice(-2)}function b(){const e=D(),s=`${e.getFullYear()}-${l(e.getMonth()+1)}-${l(e.getDate())}`,r=parseInt(a.value),n=`https://api.sunrise-sunset.org/json?${`&lat=${c[r][1]}&lng=${c[r][2]}`}&date=${s}&formatted=0&tzid=Asia/Tokyo`;fetch(n,{method:"GET",mode:"cors"}).then(t=>{if(!t.ok)throw new Error(`status: ${t.status}`);return t.json()}).then(t=>{console.log(t);let o=-1;switch(!0){case e.getTime()<Date.parse(t.results.astronomical_twilight_begin):o=0;break;case e.getTime()<Date.parse(t.results.sunrise):o=1;break;case e.getTime()<Date.parse(t.results.sunrise)+9e5:o=2;break;case e.getTime()>Date.parse(t.results.astronomical_twilight_end):o=0;break;case e.getTime()>Date.parse(t.results.sunset):o=5;break;case e.getTime()>Date.parse(t.results.sunset)-9e5:o=4;break;default:o=3;break}d.textContent=c[r][0],g.textContent=h[o],f.textContent=`${e.toLocaleDateString("ja-JP")}(${y[e.getDay()]})`,p.textContent=`${e.toLocaleTimeString("ja-JP")}.${Math.floor(e.getMilliseconds()/10)}`}).catch(t=>{window.alert("天体データが取得できませんでした"),console.error(t)})}
